---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import PhaseNav from '../../../components/PhaseNav.astro';
---

<BaseLayout title="Phase 7: Closure - EMDR" description="Ensuring client stability at the end of each session, whether processing is complete or incomplete.">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-16">
    <!-- Breadcrumb -->
    <nav class="text-sm mb-6 no-print">
      <ol class="flex items-center gap-2 text-charcoal/60">
        <li><a href="/clinicians" class="hover:text-forest-600 transition-colors">Clinicians</a></li>
        <li>/</li>
        <li><a href="/clinicians/emdr" class="hover:text-forest-600 transition-colors">EMDR</a></li>
        <li>/</li>
        <li class="text-charcoal">Phase 7</li>
      </ol>
    </nav>

    <!-- Header with visual emphasis -->
    <header class="mb-10">
      <div class="flex items-start justify-between flex-wrap gap-4">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 bg-gradient-to-br from-lavender-500 to-lavender-600 rounded-2xl flex items-center justify-center text-white font-serif text-2xl font-bold shadow-lg">
            7
          </div>
          <div>
            <p class="text-lavender-600 font-medium text-sm uppercase tracking-wide">Phase 7 of 8</p>
            <h1 class="font-serif text-3xl sm:text-4xl font-semibold text-charcoal">
              Closure
            </h1>
          </div>
        </div>
        <button
          onclick="window.print()"
          class="no-print inline-flex items-center gap-2 px-4 py-2 bg-white border border-wood-300 text-charcoal rounded-lg hover:bg-wood-50 transition-colors text-sm shadow-sm"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
          </svg>
          Print
        </button>
      </div>
    </header>

    <!-- Goals as horizontal pills -->
    <div class="flex flex-wrap gap-2 mb-10">
      <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-lavender-100 text-lavender-700 rounded-full text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Return to equilibrium
      </span>
      <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-lavender-100 text-lavender-700 rounded-full text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Provide appropriate closure
      </span>
      <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-lavender-100 text-lavender-700 rounded-full text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Prepare for between-session
      </span>
      <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-lavender-100 text-lavender-700 rounded-full text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Maintain treatment gains
      </span>
    </div>

    <!-- Two column layout for main content -->
    <div class="grid lg:grid-cols-3 gap-6">

      <!-- Left column: Main content cards -->
      <div class="lg:col-span-2 space-y-6">

        <!-- Opening Script Card -->
        <div class="bg-white rounded-xl shadow-sm border border-wood-200 overflow-hidden">
          <div class="bg-gradient-to-r from-forest-600 to-forest-700 px-5 py-3">
            <h2 class="text-white font-semibold flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
              </svg>
              Opening Script
            </h2>
          </div>
          <div class="p-5">
            <div class="bg-forest-50 rounded-lg p-4 border-l-4 border-forest-500">
              <p class="text-sm text-charcoal italic leading-relaxed">
                "We are now moving into the closure phase. Whether we fully processed the memory today or still have more work to do, the goal of this phase is to ensure you feel stable and grounded before we end the session."
              </p>
            </div>
          </div>
        </div>

        <!-- Closure Steps Card -->
        <div class="bg-white rounded-xl shadow-sm border border-wood-200 overflow-hidden">
          <div class="bg-gradient-to-r from-teal-500 to-teal-600 px-5 py-3">
            <h2 class="text-white font-semibold flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
              Closure Steps
            </h2>
          </div>
          <div class="p-5 space-y-4">
            <!-- Step 1 -->
            <div class="border-l-4 border-lavender-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-lavender-500 text-white rounded-full flex items-center justify-center text-xs font-bold">1</span>
                <h3 class="font-semibold text-charcoal">Assess Current State</h3>
              </div>
              <div class="bg-lavender-50 rounded-lg p-3">
                <p class="text-sm text-charcoal italic">"Take a moment to check in with yourself. How are you feeling right now?"</p>
              </div>
              <div class="mt-2 grid grid-cols-2 gap-2 text-sm">
                <div class="bg-forest-100 rounded p-2 text-forest-800">
                  <strong>Calm:</strong> Proceed with closure
                </div>
                <div class="bg-coral-100 rounded p-2 text-coral-800">
                  <strong>Distressed:</strong> Use grounding/containment
                </div>
              </div>
            </div>

            <!-- Step 2 -->
            <div class="border-l-4 border-teal-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-xs font-bold">2</span>
                <h3 class="font-semibold text-charcoal">Containment (Incomplete Processing)</h3>
              </div>
              <div class="bg-teal-50 rounded-lg p-3">
                <p class="text-sm text-charcoal italic">"If there's anything unresolved from today's session, let's place anything unfinished in a safe container until we're ready to return to it."</p>
              </div>
              <p class="text-xs text-charcoal/60 mt-2">Guide visualization of placing material in a locked box, vault, or other safe container.</p>
            </div>

            <!-- Step 3 -->
            <div class="border-l-4 border-forest-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-forest-500 text-white rounded-full flex items-center justify-center text-xs font-bold">3</span>
                <h3 class="font-semibold text-charcoal">Grounding Techniques</h3>
              </div>
              <div class="bg-forest-50 rounded-lg p-3 mb-2">
                <p class="text-sm text-charcoal italic">"I'd like to help you feel even more present before we wrap up."</p>
              </div>
              <div class="grid sm:grid-cols-3 gap-2">
                <div class="bg-wood-50 rounded-lg p-2 text-center text-sm text-charcoal">Breathing exercise</div>
                <div class="bg-wood-50 rounded-lg p-2 text-center text-sm text-charcoal">Five senses awareness</div>
                <div class="bg-wood-50 rounded-lg p-2 text-center text-sm text-charcoal">Safe place visualization</div>
              </div>
            </div>

            <!-- Step 4 -->
            <div class="border-l-4 border-sunny-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-sunny-500 text-white rounded-full flex items-center justify-center text-xs font-bold">4</span>
                <h3 class="font-semibold text-charcoal">Reorient to Present</h3>
              </div>
              <div class="bg-sunny-50 rounded-lg p-3">
                <p class="text-sm text-charcoal italic">"Notice your feet on the ground, the chair supporting you, and the space around you. You are here, in the present moment, and you are safe."</p>
              </div>
            </div>

            <!-- Step 5 -->
            <div class="border-l-4 border-coral-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-coral-500 text-white rounded-full flex items-center justify-center text-xs font-bold">5</span>
                <h3 class="font-semibold text-charcoal">Between-Session Processing Education</h3>
              </div>
              <div class="bg-coral-50 rounded-lg p-3">
                <p class="text-sm text-charcoal italic">"Your brain may continue processing what we worked on today, even in dreams or unexpected moments. If anything comes up, just notice it without judgment. You can write it down or use your grounding skills. If anything feels too intense, we can address it next session."</p>
              </div>
            </div>

            <!-- Step 6 -->
            <div class="border-l-4 border-lavender-400 pl-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="w-6 h-6 bg-lavender-500 text-white rounded-full flex items-center justify-center text-xs font-bold">6</span>
                <h3 class="font-semibold text-charcoal">Final Check-In</h3>
              </div>
              <div class="bg-lavender-50 rounded-lg p-3">
                <p class="text-sm text-charcoal italic">"Before we finish, is there anything else you need to feel grounded and settled?"</p>
              </div>
              <div class="bg-forest-50 rounded-lg p-3 mt-2">
                <p class="text-sm text-charcoal italic">"Great job today. Take care of yourself, and we'll continue next time."</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Complete vs Incomplete Card -->
        <div class="bg-white rounded-xl shadow-sm border border-wood-200 overflow-hidden">
          <div class="bg-gradient-to-r from-forest-600 to-forest-700 px-5 py-3">
            <h2 class="text-white font-semibold flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
              </svg>
              Complete vs. Incomplete Session Closure
            </h2>
          </div>
          <div class="p-5">
            <div class="grid sm:grid-cols-2 gap-4">
              <div class="border-2 border-forest-200 rounded-xl p-4">
                <div class="flex items-center gap-2 mb-3">
                  <div class="w-8 h-8 bg-forest-500 rounded-lg flex items-center justify-center">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-forest-800">Complete Processing</h3>
                </div>
                <p class="text-xs text-charcoal/60 mb-2">SUD = 0, VOC = 7, Body scan clear</p>
                <ol class="space-y-1 text-sm text-charcoal/80">
                  <li>1. Acknowledge work completed</li>
                  <li>2. Brief debrief</li>
                  <li>3. Remind about continued processing</li>
                  <li>4. End session</li>
                </ol>
              </div>
              <div class="border-2 border-coral-200 rounded-xl p-4">
                <div class="flex items-center gap-2 mb-3">
                  <div class="w-8 h-8 bg-coral-500 rounded-lg flex items-center justify-center">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-coral-800">Incomplete Processing</h3>
                </div>
                <p class="text-xs text-charcoal/60 mb-2">Allow 10-15 min for closure</p>
                <ol class="space-y-1 text-sm text-charcoal/80">
                  <li>1. Stop processing</li>
                  <li>2. Safe/Calm Place with slow BLS</li>
                  <li>3. Containment exercise</li>
                  <li>4. Debrief and instructions</li>
                  <li>5. Grounding check</li>
                  <li>6. Ensure stability before leaving</li>
                </ol>
              </div>
            </div>
          </div>
        </div>

        <!-- Complete Processing Script Card -->
        <div class="bg-white rounded-xl shadow-sm border border-wood-200 overflow-hidden">
          <div class="bg-gradient-to-r from-sunny-500 to-sunny-600 px-5 py-3">
            <h2 class="text-white font-semibold flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
              </svg>
              Closure Script for Complete Processing
            </h2>
          </div>
          <div class="p-5 space-y-3">
            <div class="bg-sunny-50 rounded-lg p-4 border-l-4 border-sunny-500">
              <p class="text-sm text-charcoal italic">"You have done a lot of work today. We may or may not feel like the memory is completely resolved or free of disturbance but keep in mind that each memory is different and some may take one session while others may take several."</p>
            </div>
            <div class="bg-sunny-50 rounded-lg p-4 border-l-4 border-sunny-500">
              <p class="text-sm text-charcoal italic">"I would like to invite you to take a few minutes to notice how you are doing and feeling right now. How are you feeling?"</p>
            </div>
            <div class="bg-forest-50 rounded-lg p-4 border-l-4 border-forest-500">
              <p class="text-sm text-charcoal italic">"I am right here with you and holding the space you need now to return to greater balance."</p>
            </div>
          </div>
        </div>

      </div>

      <!-- Right column: Sticky Sidebar -->
      <div class="lg:col-span-1">
        <div class="lg:sticky lg:top-24 space-y-6">
          <!-- Quick Reference -->
          <div class="bg-white rounded-xl shadow-sm border border-wood-200 overflow-hidden">
          <div class="bg-lavender-800 px-4 py-3">
            <h2 class="text-white font-semibold text-sm flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
              </svg>
              Quick Reference
            </h2>
          </div>
          <div class="p-4">
            <h3 class="text-xs font-semibold text-forest-700 uppercase tracking-wide mb-2">Complete Session</h3>
            <ol class="space-y-1 text-sm mb-4">
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-forest-100 text-forest-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">1</span>
                <span>Acknowledge completion</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-forest-100 text-forest-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">2</span>
                <span>Brief debrief</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-forest-100 text-forest-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">3</span>
                <span>Remind: continued processing</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-forest-100 text-forest-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">4</span>
                <span>End session</span>
              </li>
            </ol>

            <h3 class="text-xs font-semibold text-coral-700 uppercase tracking-wide mb-2">Incomplete Session</h3>
            <ol class="space-y-1 text-sm">
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">1</span>
                <span>Stop (10-15 min for closure)</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">2</span>
                <span>Safe/calm place + slow BLS</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">3</span>
                <span>Containment if needed</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">4</span>
                <span>Debrief and instructions</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">5</span>
                <span>Grounding check</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="w-4 h-4 rounded-full bg-coral-100 text-coral-700 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">6</span>
                <span>Ensure stability</span>
              </li>
            </ol>
          </div>
        </div>

        <!-- Clinical Considerations -->
        <div class="bg-gradient-to-br from-amber-50 to-amber-100/50 rounded-xl border border-amber-200 overflow-hidden">
          <div class="px-4 py-3 border-b border-amber-200">
            <h2 class="font-semibold text-amber-800 text-sm flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
              </svg>
              Clinical Notes
            </h2>
          </div>
          <ul class="p-4 space-y-2 text-sm text-amber-900/80">
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              <strong>Never rush closure</strong>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Incomplete processing is normal
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Client safety is the priority
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Prepare clients for between-session experiences
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Have crisis resources available
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Document session status & closure techniques
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-500 mt-1">•</span>
              Recommend TICES log for tracking
            </li>
          </ul>
        </div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <div class="phase-nav mt-10">
      <PhaseNav currentPhase={7} />
    </div>
  </div>
</BaseLayout>
